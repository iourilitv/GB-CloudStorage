# Updating after the project acceptance. 
GeekBrains. Курсовая работа: Итоговый проект Cloud Storage.
@Litvinenko Yuriy

Скриншшот GUI https://yadi.sk/i/AwTDqr84PshnQA
Видео https://youtu.be/ku0okBn_zGM

## Issues and developments.
1. GUI. Проверить и исправить вывод сообщений в метку уведомлений. Есть баги.
2. GUI. ListVew. 
	- Исправить сортировку - вверху должны быть папки, а ниже файлы. 
	- Проверить и доработать контекстное меню. 
	Добавить clientListView.setContextMenu(contextMenu) в блок if, где выбирается показывать upload/download.
3. Netty. Разобраться как сохраняется ctx в HashMap athorizedUser - почему в его объекте указан AuthMessage/CommandMessage. 
    Из-за чего эти объекты распознаются как не одинаковые, хотя ID у них одинаковые. 
    Из-за этого пришлось использовать логин в качестве ключа. 
    Но тогда дольше искать соединение, если зарегистрированный клиент разрывает соединение нештатно, 
    т.к. в этот момент AuthGateway известно только ctx. 
    Или я путаю?
4. Netty. Добавить проверку активности соединения на стороне клиента, чтобы не вылетало исключение при отваливании сервера.
5. Netty. При передаче файлов сериализовать только объект сообщения, а байты передавать средствами netty следом после команды.
6. FileFrags. Исправить передачу и сшивание больших файлов. Возможно проблему целостности итогового файла(Вопрос 1) можно решить так:
	- создавать новый массив для каждого фрагмента;
	- следующий фрагмент запускать только после получения подтвержденния получения и сохранения текущего фрагмента.
7. DONE. File. Добавить проверку контрольной суммы при отправке байтового массива, целого файла и сравнивать его с сохраненным и собранным.
8. DONE. DB. Добавить базу данных в процесс регистрации пользователей.
    - подключение к MySQL, регистрация и авторизация через БД;
	- скрывать пароли с помощью "хэширования с солью".
9. DONE. Заменить класс команд на enum. По примеру:
    public enum Data {
        A, B, C;
    }
    public static void main(String[] args) {
        test(Data.A);
        test(Data.B);
        test(Data.C);
    }
    public static void test(Data e_num){
        switch (e_num) {
            case A:
                System.out.println(e_num);//A
                break;
            case B:
                System.out.println(e_num);//B
                break;
            case C:
                System.out.println(e_num);//C
                break;
        }
    }
10. DONE. GUI.File. Добавить в меню выбор абсолютного пути к корневой папке клиента.
11. DONE. Добавить конфигурационный файл для клиента со следующими полями:
    <Root_default>"storage"</>
    <Root_absolute>""</> //в начальном запуске - пустой, но при смене пользователем 
    корневой директории будет указан абсолютный путь(например - D:\cloudstorage\storage\).
    И добавить логику установки начальных параметров при каждом запуске.
12. DONE.Добавить конфигурационный файл для сервера со следующими полями:
    <Root_default>"storage"</>
    <Root_absolute>""</> //сисадмин может указать, тогда в начальном запуске
    корневая директория сервера будет изменена на абсолютную.
    И добавить логику установки начальных параметров при запуске.
13. DONE. (json-object).Нужно в клиента и сервера добавить при запуске приложения создание каталога storage, в папке 
    где разворачивается jar-файл, с условием «если еще нет такой директории».
14. DONE. Добавить readme.txt файлы в [client] и [server] (уже создал файл в resources) 
    и копировать их в корневую директорию jar при первом старте приложения.
15. GUI. Добавить функционал "Сменить пароль" в GUI.
    DONE. В UsersAuthController уже добавлен метод, чтобы изменить данные в БД.
16. GUI. Добавить поля в регистрационную форму: username, email.
    DONE. В БД такие поля уже созданы.
17. DONE. DB. Индексировать поиск пользователей в БД по логину и email.
	- применил первичный ключ на login и ключ на email. Теперь поиск оптимизирован до 
	Single Row(constant) по обоим полям, но если искать по отдельности.
18. Netty. Устранить исключение на сервере при разрыве соединения с неавторизованным
    клиентом.
19. GUI. Добавить возвращение в исходное состояние при разрыве соединения с сервером
    в неавторизованном режиме.
20. Maven. Исключить предупреждение о кодировке при сборке проекта. 
    Возможно, нужно изменить pom.xml.
